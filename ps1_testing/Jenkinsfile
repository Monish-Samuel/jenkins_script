pipeline{
agent any
parameters {
            string(name: 'build_no', defaultValue: '')
        }
    stages{
        stage('Source_Code_Checkout'){
            steps{
                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/Monish-Samuel/powershell_testing.git']]])
            }
        }
        stage('Build Number Check'){
		steps{	
			script{
			def file= powershell returnStdout: true, script: './build_number.ps1'
			def buildNumber= powershell (returnStdout: true, script: 'Get-Content ./buildNo.txt').trim()
			currentBuild.displayName = "${buildNumber}"
			env.build_no= buildNumber
		}
	    }	
	}
	    stage('Global Check'){
		    steps{
		    echo '${env.build_no}'
		    }
	    }
    }
}
